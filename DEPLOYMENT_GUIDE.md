# Deployment Guide for Render

This guide will help you deploy your Multi-Agentic Conversational AI System to Render.

## Prerequisites

1. **Render Account**: Create a free account at [render.com](https://render.com)
2. **OpenAI API Key**: Get your API key from [OpenAI](https://platform.openai.com/api-keys)
3. **Git Repository**: Your code should be in a Git repository (GitHub, GitLab, etc.)

## Deployment Steps

### Step 1: Prepare Your Repository

1. Ensure all the deployment files are in your repository:
   - `render.yaml` - Render configuration
   - `build.sh` - Build script
   - `start.sh` - Start script
   - `requirements.txt` - Python dependencies (with gunicorn)
   - `Dockerfile` - Optional Docker configuration

2. Make sure your scripts are executable:
   ```bash
   chmod +x build.sh start.sh
   ```

### Step 2: Connect to Render

1. Log into your Render dashboard
2. Click "New +" and select "Web Service"
3. Connect your Git repository
4. Choose your repository and branch (usually `main` or `master`)

### Step 3: Configure the Service

#### Option A: Using render.yaml (Recommended)
If you have the `render.yaml` file, Render will automatically detect it and use the configuration.

#### Option B: Manual Configuration
If not using render.yaml, configure manually:

- **Environment**: Python 3
- **Region**: Choose your preferred region
- **Branch**: main (or your default branch)
- **Build Command**: `./build.sh`
- **Start Command**: `./start.sh`
- **Plan**: Free (for testing) or Starter (for production)

### Step 4: Set Environment Variables

In the Render dashboard, go to your service's Environment tab and add:

**Required:**
- `OPENAI_API_KEY`: Your OpenAI API key

**Optional (will use defaults if not set):**
- `OPENAI_MODEL`: gpt-4-turbo-preview
- `DATABASE_URL`: sqlite:///./crm_chatbot.db
- `CHROMA_DB_PATH`: ./chroma_db
- `API_HOST`: 0.0.0.0
- `API_PORT`: 10000
- `DEBUG`: false

**Note**: SECRET_KEY will be auto-generated by Render.

### Step 5: Deploy

1. Click "Create Web Service"
2. Render will automatically:
   - Clone your repository
   - Run the build script
   - Install dependencies
   - Build the frontend
   - Start the application

### Step 6: Monitor Deployment

1. Watch the build logs in real-time
2. The deployment typically takes 5-10 minutes
3. Once complete, you'll get a URL like `https://your-app-name.onrender.com`

## Verification

### Health Check
Visit `https://your-app-name.onrender.com/health` to verify the service is running.

### API Documentation
Access the interactive API docs at `https://your-app-name.onrender.com/docs`.

### Frontend
The React frontend will be available at the root URL: `https://your-app-name.onrender.com`

## Troubleshooting

### Common Issues

1. **Build Fails**:
   - Check that `build.sh` is executable
   - Verify all dependencies are in `requirements.txt`
   - Check Node.js version compatibility

2. **Start Fails**:
   - Ensure `start.sh` is executable
   - Check that gunicorn is installed
   - Verify environment variables are set correctly

3. **OpenAI API Errors**:
   - Confirm your API key is correct
   - Check your OpenAI account has sufficient credits
   - Verify the model name is correct

4. **Database Issues**:
   - SQLite files will be created automatically
   - Database will persist with attached disk storage

### Logs

View logs in the Render dashboard:
1. Go to your service
2. Click on "Logs" tab
3. Monitor real-time logs for debugging

## Production Considerations

### Performance
- Consider upgrading to a paid plan for better performance
- Monitor resource usage and scale accordingly

### Security
- Use environment variables for all sensitive data
- Consider using a managed database for production
- Implement proper authentication if needed

### Monitoring
- Set up monitoring and alerting
- Use Render's built-in metrics
- Consider external monitoring tools

## Alternative Deployment Methods

### Docker Deployment
If you prefer Docker:
1. Use the included `Dockerfile`
2. Deploy to Render using Docker
3. Configure environment variables in Render

### Static Site + API
For better performance, consider:
1. Deploy the React frontend to Render Static Sites
2. Deploy the API separately
3. Configure CORS properly

## Support

- Check Render's documentation: [render.com/docs](https://render.com/docs)
- Review the application logs for specific error messages
- Ensure all environment variables are properly set

## Next Steps

After successful deployment:
1. Test all API endpoints
2. Verify chat functionality
3. Test document upload
4. Check CRM features
5. Monitor performance metrics 